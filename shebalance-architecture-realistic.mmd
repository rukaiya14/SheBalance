graph TB
    %% Define styles for different service categories
    classDef userInterface fill:#E8F4FD,stroke:#1976D2,stroke-width:2px,color:#000
    classDef security fill:#FFF3E0,stroke:#F57C00,stroke-width:2px,color:#000
    classDef compute fill:#E8F5E8,stroke:#388E3C,stroke-width:2px,color:#000
    classDef ai fill:#F3E5F5,stroke:#7B1FA2,stroke-width:2px,color:#000
    classDef storage fill:#FFF8E1,stroke:#FBC02D,stroke-width:2px,color:#000
    classDef user fill:#FFEBEE,stroke:#D32F2F,stroke-width:2px,color:#000

    %% User Layer
    User[ğŸ‘¤ Artisan Users]:::user
    
    %% User Interface Layer
    subgraph "User Interface Layer"
        WA[ğŸ“± WhatsApp Business API<br/>Voice & Chat Interface]:::userInterface
        PWA[ğŸ’» Progressive Web App<br/>React.js + TypeScript]:::userInterface
        Voice[ğŸ¤ Voice Interface<br/>Speech Recognition]:::userInterface
    end
    
    %% API Gateway & Security Layer
    subgraph "API Gateway & Security"
        APIG[ğŸšª AWS API Gateway<br/>REST & WebSocket APIs]:::security
        WAF[ğŸ›¡ï¸ AWS WAF<br/>DDoS Protection]:::security
        Cognito[ğŸ” Amazon Cognito<br/>Authentication & Authorization]:::security
    end
    
    %% Serverless Compute Layer
    subgraph "Serverless Compute Layer"
        Lambda1[âš¡ Skill Assessment Lambda<br/>Computer Vision Processing]:::compute
        Lambda2[ğŸ¯ Matching Engine Lambda<br/>AI-Powered Job Matching]:::compute
        Lambda3[ğŸ—£ï¸ Voice Processing Lambda<br/>Speech-to-Text & NLP]:::compute
        Lambda4[ğŸ¤– WhatsApp Bot Lambda<br/>Conversational AI]:::compute
    end
    
    %% AI/ML Services Layer
    subgraph "AI/ML Services"
        Bedrock[ğŸ§  Amazon Bedrock<br/>Claude 3 Sonnet LLM]:::ai
        Rekognition[ğŸ‘ï¸ Amazon Rekognition<br/>Custom Labels for Crafts]:::ai
        SageMaker[ğŸ¤– Amazon SageMaker<br/>Custom ML Models & Training]:::ai
        Polly[ğŸ”Š Amazon Polly<br/>Text-to-Speech]:::ai
        Transcribe[ğŸ“ Amazon Transcribe<br/>Speech-to-Text]:::ai
        Q[â“ Amazon Q Business<br/>Intelligent Query Processing]:::ai
    end
    
    %% Data & Storage Layer
    subgraph "Data & Storage"
        DynamoDB[ğŸ—„ï¸ Amazon DynamoDB<br/>User Profiles & Skills]:::storage
        S3[ğŸ“¦ Amazon S3<br/>Images & Media Storage]:::storage
        RDS[ğŸ—ƒï¸ Amazon RDS Aurora<br/>Transactional Data]:::storage
        ElastiCache[âš¡ Amazon ElastiCache<br/>Session & Cache Data]:::storage
    end
    
    %% User to Interface Connections
    User --> WA
    User --> PWA
    User --> Voice
    
    %% Interface to API Gateway
    WA --> APIG
    PWA --> APIG
    Voice --> APIG
    
    %% API Gateway Security Flow
    APIG --> WAF
    WAF --> Cognito
    
    %% Cognito to Lambda Authentication
    Cognito --> Lambda1
    Cognito --> Lambda2
    Cognito --> Lambda3
    Cognito --> Lambda4
    
    %% Lambda 1 (Skill Assessment) Bidirectional Flows
    Lambda1 <--> DynamoDB
    Lambda1 <--> S3
    Lambda1 --> Rekognition
    Lambda1 <--> SageMaker
    Lambda1 --> Bedrock
    
    %% Lambda 2 (Matching Engine) Bidirectional Flows
    Lambda2 <--> DynamoDB
    Lambda2 <--> RDS
    Lambda2 <--> SageMaker
    Lambda2 --> Q
    Lambda2 <--> S3
    
    %% Lambda 3 (Voice Processing) Bidirectional Flows
    Lambda3 <--> ElastiCache
    Lambda3 <--> DynamoDB
    Lambda3 --> Transcribe
    Lambda3 --> Polly
    
    %% Lambda 4 (WhatsApp Bot) Bidirectional Flows
    Lambda4 <--> DynamoDB
    Lambda4 <--> ElastiCache
    Lambda4 <--> S3
    Lambda4 --> Bedrock
    
    %% SageMaker Training & Inference Flows
    SageMaker <--> S3
    SageMaker <--> DynamoDB
    SageMaker --> Rekognition
    
    %% AI Services Data Flows
    Bedrock --> DynamoDB
    Q <--> RDS
    Q <--> DynamoDB
    
    %% Storage Interconnections
    DynamoDB <--> ElastiCache
    RDS <--> S3
    
    %% Feedback Loops for ML Training
    DynamoDB -.-> SageMaker
    S3 -.-> SageMaker
    RDS -.-> SageMaker